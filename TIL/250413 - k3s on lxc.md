# 컨테이너 생성 - pve web dashboard

* 권한 설정: '권한이 없는 컨테이너' 옵션의 선택을 해제하여 *권한 있는(Privileged)* 컨테이너를 생성합니다.

* 추가 설정: 바로 실행되지 않음. proxmox 호스트에서 해당 컨테이너의 설정파일 (`/etc/pve/lxc/<CID>.conf`)을 수정합니다.

```bash
lxc.apparmor.profile: unconfined
lxc.cgroup.devices.allow: a
lxc.cap.drop:
lxc.mount.auto: "proc:rw sys:rw"
```

* 이제 컨테이너 실행이 가능해짐. 컨테이너 내부에서 `/etc/rc.local`을 생성 혹은 수정하여 아래 스크립트 추가.

```bash
#!/bin/sh -e
if [ ! -e /dev/kmsg ]; then
  ln -s /dev/console /dev/kmsg
fi
mount --make-rshared /
```

* 권한 부여: 스크립트에 실행 권한 부여
```bash
chmod +x /etc/rc.local
```

* 재부팅.

# linux 기본 설정

[우분투 기본설치](OS-linux/ubuntu%20server%20설정.md) 후 아래 명령어로 k3s 설치.
