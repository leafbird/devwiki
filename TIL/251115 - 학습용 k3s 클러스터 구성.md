llm과 같이 구성하다 제대로 진행 안됐던 이슈들만 추가로 정리해둠. 

## web ui가 제대로 열리지 않음. 

portforwarding을 해주어야 하고, http://localhost/... 이외의 외부접속을 받으려면 포트 개방도 0.0.0.0으로 해야 한다. 보안상 권장되지 않아서 내부 svc 정의를 nodeport로 변환해 처리했다.

### 첫 번째 시도 : redis 제외하고 설치

grok이 첫 번째로 제안한 솔루션이지만 이게 근본 원인은 아닌 듯. 참고삼아 기록만 남겨둠.  

```sh
# 1) 기존 삭제
kubectl delete -n argocd -f https://raw.githubusercontent.com/argoproj/argo-cd/stable/manifests/install.yaml
kubectl delete namespace argocd   # (선택) 완전 초기화

# 2) 네임스페이스 재생성
kubectl create namespace argocd

# 3) **Redis HA 없이** 설치 (공식 stable 매니페스트는 redis-ha 포함 → 아래 커스텀)
curl -sL https://raw.githubusercontent.com/argoproj/argo-cd/stable/manifests/install.yaml \
  | sed '/redis-ha/d' | kubectl apply -n argocd -f -
```

## 포트 개방 설정


### 기본 방법. 8080 포트포워딩.

```sh
kubectl port-forward svc/argocd-server -n argocd 8080:443
```
접속은 https://localhost:8080 으로만 해야 한다. 솔루션이 될 수 없음. 

### 다른 pc에서 접속하도록 설정

방법 1) kubectl port-forward를 0.0.0.0로 열기 (권장 X, 해킹 위험)

```sh
kubectl port-forward --address 0.0.0.0 svc/argocd-server -n argocd 8080:443
```

방법 2) ArgoCD svc/argocd-server를 LoadBalancer or NodePort 로 바꾸기 (권장)

```sh
kubectl -n argocd patch svc argocd-server \
  -p '{"spec": {"type": "NodePort"}}'

# 포트 번호 확인
kubectl -n argocd get svc argocd-server

# 혹은 포트번호를 명시적으로 지정
kubectl -n argocd patch svc argocd-server \
  -p '{"spec": {"type": "NodePort", "ports": [{"name":"https","port":443,"targetPort":8080,"nodePort":32080}]}}'
```

## 초기 비밀번호 확인

```sh
kubectl -n argocd get secret argocd-initial-admin-secret -o jsonpath="{.data.password}" | base64 -d; echo
```