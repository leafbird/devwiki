# NATS

## install

ref : https://docs.nats.io/running-a-nats-service/introduction/installation

linux에서 docker로 nats 설치

```sh
docker run -d --name nats-server \
  -p 4222:4222 \
  -p 8222:8222 \
  -v nats-data:/data \
  nats:latest \
  -js --http_port 8222 -sd /data
```

* -js : JetStream 기능 활성화
* --http_port 8222 또는 -m 8222 : HTTP 모니터링 포트 활성화 
* -sd /data : 기존 nats-data 볼륨 유지하여 데이터 영속화

## nats cli

ref : https://github.com/nats-io/natscli

install on windows

```pwsh
winget install natsauthors.cli
```

configuration

```pwsh
nats context add nats --server demo.nats.io:4222 --description "NATS Demo" --select
nats context ls
```

test

```pwsh
nats sub cli.demo 

nats pub cli.demo "hello world" 
nats pub cli.demo "message {{.Count}} @ {{.TimeStamp}}" --count=5
echo hello|nats pub cli.demo 
```